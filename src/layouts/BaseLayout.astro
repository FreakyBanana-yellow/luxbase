---
import "../styles/global.css";

/* title kommt als Prop rein, fallback ¬ªLuxbase¬´ */
const { title = "Luxbase" } = Astro.props;

/* üëâ Direkt per import.meta.env, ohne extra const */
const SUPABASE_URL  = import.meta.env.PUBLIC_SUPABASE_URL;
const SUPABASE_KEY  = import.meta.env.PUBLIC_SUPABASE_ANON_KEY;

/* Fail-fast, wenn in Build-Umgebung noch immer nicht gesetzt */
if (!SUPABASE_URL || !SUPABASE_KEY) {
  throw new Error("‚ùå PUBLIC_SUPABASE_URL oder _ANON_KEY fehlt ‚Äì pr√ºf .env / Netlify!");
}
---
<html lang="de" class="scroll-smooth">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>{title}</title>

    <!-- Google Fonts -->
    <link href="https://fonts.googleapis.com/css2?family=Open+Sans:wght@400;600&family=Playfair+Display:wght@400;700&display=swap" rel="stylesheet" />
    <meta name="theme-color" content="#0d0d0d" />
  </head>

  <body class="min-h-screen flex flex-col bg-luxblack text-white font-sans">
   <header class="bg-black border-b border-luxgray p-4 flex justify-between items-center flex-wrap">
  <h1 class="text-xl font-serif text-luxgold">LUXBASE</h1>
  <nav class="flex flex-wrap gap-4 text-sm font-semibold">
    <a href="/dashboard" class="hover:text-luxgold">Dashboard</a>
    <a href="/preise" class="hover:text-luxgold">Pakete & Preise</a>
    <a href="/kontakt" class="hover:text-luxgold">Kontakt</a>
  </nav>
  <div class="flex items-center gap-3 mt-4 md:mt-0">
    <button id="logoutBtn" class="border border-luxgold text-luxgold px-3 py-1 rounded hover:bg-luxgold hover:text-black transition">
      Abmelden
    </button>
  </div>
</header>

    <main class="flex-1">
      <slot />
    </main>

    <footer class="text-center text-sm text-luxgold/70 py-8 border-t border-luxgray">
      ¬© <script>document.write(new Date().getFullYear())</script> Luxbase ‚Äì Automation with Style.
    </footer>

    <!-- Supabase Init ‚Äì Variablen werden HIER hart eingebrannt -->
    <script type="module">
      import { createClient } from "https://cdn.jsdelivr.net/npm/@supabase/supabase-js/+esm";
      window.supabase = createClient(
        /* Build-Time Strings! */
        "${SUPABASE_URL}",
        "${SUPABASE_KEY}"
      );

      /* ‚Ä¶ Menu- & Login-JS bleibt unver√§ndert ‚Ä¶ */
    </script>
  </body>
</html>
