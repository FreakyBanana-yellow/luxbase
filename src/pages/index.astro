---
import BaseLayout from '@/layouts/BaseLayout.astro'
;
---

<BaseLayout title="Willkommen bei Luxbase">
  <section class="text-center py-32 max-w-xl mx-auto">
    <h1 class="text-5xl font-bold text-luxgold mb-8">Willkommen bei Luxbase</h1>
    <p class="text-white/80 mb-10">
      Die elegante Automatisierungsplattform für Creator:innen, Agenturen und digitale Performer.
    </p>
  </section>

  <!-- Tools Showcase -->
  <section class="max-w-6xl mx-auto grid gap-32 md:gap-48 py-32 px-6" id="tools">
    
    <!-- VIP-Bot -->
    <div class="grid md:grid-cols-2 gap-12 items-center">
      <img src="/assets/images/baas2.png" alt="VIP Bot" class="mx-auto max-w-md rounded-xl shadow-xl" loading="lazy" />
      <div class="text-center md:text-left">
        <h2 class="text-4xl font-serif font-bold text-luxgold mb-6">BaaS – Dein VIP‑Bot</h2>
        <p class="text-lg text-white/80 mb-6">
          Altersprüfung, Zahlungsnachweise, Gruppen­freischaltung und Mitglieder­verwaltung vollautomatisch per Telegram.
        </p>
        <a href="/vipbot" class="inline-block px-8 py-3 bg-luxgold text-black font-semibold rounded-lg hover:bg-yellow-400 transition">
          Mehr erfahren
        </a>
      </div>
    </div>

    <!-- VaultRoom -->
    <div class="grid md:grid-cols-2 gap-12 items-center md:flex-row-reverse">
      <img src="src="/assets/images/vaultroom2.png" alt="VaultRoom" class="mx-auto max-w-md rounded-xl shadow-xl" loading="lazy" />
      <div class="text-center md:text-left">
        <h2 class="text-4xl font-serif font-bold text-luxgold mb-6">VaultRoom – Dein Content‑Safe</h2>
        <p class="text-lg text-white/80 mb-6">
          Verwalte, tagge und plane deine Inhalte zentral – mit KI-Unterstützung, Bulk-Upload & Backup-System.
        </p>
        <a href="/vault" class="inline-block px-8 py-3 bg-luxgold text-black font-semibold rounded-lg hover:bg-yellow-400 transition">
          Mehr erfahren
        </a>
      </div>
    </div>

    <!-- StageOne -->
    <div class="grid md:grid-cols-2 gap-12 items-center">
      <img src="src="/assets/images/stageone2.png" alt="StageOne" class="mx-auto max-w-md rounded-xl shadow-xl" loading="lazy" />
      <div class="text-center md:text-left">
        <h2 class="text-4xl font-serif font-bold text-luxgold mb-6">StageOne – Multi‑Posting leicht gemacht</h2>
        <p class="text-lg text-white/80 mb-6">
          Veröffentliche Inhalte einmalig – und poste gleichzeitig auf OnlyFans, Fansly, BestFans & Co.
        </p>
        <a href="/cpplattform" class="inline-block px-8 py-3 bg-luxgold text-black font-semibold rounded-lg hover:bg-yellow-400 transition">
          Mehr erfahren
        </a>
      </div>
    </div>
  </section>
 <script type="module">
  import { createClient } from "https://cdn.jsdelivr.net/npm/@supabase/supabase-js/+esm";
  const meta = document.getElementById("supabase-config");
  const supabase = createClient(meta?.dataset.url, meta?.dataset.key);

  (async () => {
    const { data: { user } } = await supabase.auth.getUser();
    if (!user) return;

    const [{ data: m }, { data: p }] = await Promise.all([
      supabase.from("agency_member").select("agency_id").eq("user_id", user.id).limit(1),
      supabase.from("user_profile").select("account_type").eq("user_id", user.id).maybeSingle(),
    ]);

    if (m && m.length > 0 || String(p?.account_type || user.user_metadata?.account_type || "").toLowerCase() === "agency") {
      location.href = "/agency";
    } else {
      location.href = "/dashboard-model";
    }
  })();
</script>

</BaseLayout>
